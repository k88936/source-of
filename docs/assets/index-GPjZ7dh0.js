import{_ as D,d as z,a as B,b as x,c as A,r as l,e as f,o as m,f as e,g as s,w as n,h as p,t as i,i as R,F as S,j as L}from"./index-B4kNIy8N.js";import{M as N}from"./MarkdownRenderer-C8baSu7Y.js";import{J as U}from"./jszip.min-Csp9gkNQ.js";const V={name:"VersionPage",components:{ArrowLeft:A,Box:x,Download:B,Document:z,MarkdownRenderer:N},data(){return{packageInfo:{name:"Math-Calculator",displayName:"Math-Calculator",description:""},versionInfo:{version:"v2.6.5",date:"2025-09-23T06:57:45.647Z",files:[{name:"Maple Calculator_2.6.5.apks",key:"Math-Calculator/v2.6.5/Maple Calculator_2.6.5.apks",size:13037950,lastModified:"2025-09-23T06:57:45.647Z",downloadUrl:"https://rustfs.k88936.top/software-release/Math-Calculator/v2.6.5/Maple Calculator_2.6.5.apks"}]},readme:null}},computed:{totalSize(){return this.versionInfo.files?.reduce((t,o)=>t+o.size,0)||0}},async created(){},methods:{goBack(){this.$router.push(`/${this.packageInfo.name}`)},async downloadAllAsZip(){if(!this.versionInfo.files||this.versionInfo.files.length===0)return;const t=new U;await Promise.all(this.versionInfo.files.map(async d=>{try{const c=await(await fetch(d.downloadUrl)).blob();t.file(d.name,c)}catch{}}));const o=await t.generateAsync({type:"blob"}),r=document.createElement("a");r.href=URL.createObjectURL(o),r.download=`${this.packageInfo.displayName||"assets"}-${this.versionInfo.version||""}.zip`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(r.href)},formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},formatSize(t){if(t===0)return"0 B";const o=1024,r=["B","KB","MB","GB"],d=Math.floor(Math.log(t)/Math.log(o));return parseFloat((t/Math.pow(o,d)).toFixed(2))+" "+r[d]}}},Z={class:"version-page"},F={class:"version-header"},T={class:"header-nav"},j={class:"header-content"},P={class:"version-info"},E={class:"version-details"},J={class:"release-info"},O={class:"version-actions"},G={class:"content-section"},K={class:"assets-list"},q={class:"asset-info"},H={class:"asset-details"},Q={class:"asset-name"},W={class:"asset-meta"},X={class:"asset-actions"},Y=["href"],$={key:0,class:"readme-section"},ee={class:"sidebar"},oe={class:"info-list"},se={class:"info-item"},te={class:"info-item"},ne={class:"info-value"},ae={class:"info-item"},le={class:"info-value"},ie={class:"info-item"},re={class:"info-value"};function ce(t,o,r,d,a,c){const k=l("ArrowLeft"),u=l("el-icon"),v=l("el-button"),g=l("Box"),h=l("el-main"),y=l("el-container"),b=l("Document"),I=l("MarkdownRenderer"),w=l("el-col"),M=l("el-tag"),C=l("el-row");return m(),f("div",Z,[e("div",F,[s(y,null,{default:n(()=>[s(h,{style:{"max-width":"1200px",margin:"0 auto"}},{default:n(()=>[e("div",T,[s(v,{onClick:c.goBack,text:"",type:"primary"},{default:n(()=>[s(u,null,{default:n(()=>[s(k)]),_:1}),p(" "+i(a.packageInfo.displayName),1)]),_:1},8,["onClick"])]),e("div",j,[e("div",P,[s(u,{size:"32",class:"version-icon"},{default:n(()=>[s(g)]),_:1}),e("div",E,[e("h1",null,i(a.packageInfo.displayName)+" "+i(a.versionInfo.version),1),e("p",J,"Released on "+i(c.formatDate(a.versionInfo.date)),1)])]),e("div",O,[s(v,{type:"primary",onClick:c.downloadAllAsZip,icon:t.Download},{default:n(()=>o[0]||(o[0]=[p(" Download All as ZIP ",-1)])),_:1,__:[0]},8,["onClick","icon"])])])]),_:1})]),_:1})]),s(h,{class:"main-content"},{default:n(()=>[s(C,{gutter:20},{default:n(()=>[s(w,{span:16},{default:n(()=>[e("div",G,[o[3]||(o[3]=e("h3",null,"Artifact",-1)),e("div",K,[(m(!0),f(S,null,L(a.versionInfo.files,_=>(m(),f("div",{key:_.name,class:"asset-item"},[e("div",q,[s(u,{size:"16",class:"asset-icon"},{default:n(()=>[s(b)]),_:1}),e("div",H,[e("div",Q,i(_.name),1),e("div",W,i(c.formatSize(_.size)),1)])]),e("div",X,[e("a",{href:_.downloadUrl,target:"_blank",rel:"noopener"},[s(v,{size:"small",icon:t.Download},{default:n(()=>o[1]||(o[1]=[p(" Download ",-1)])),_:1,__:[1]},8,["icon"])],8,Y)])]))),128))]),a.readme?(m(),f("div",$,[o[2]||(o[2]=e("h3",null,"Documentation",-1)),s(I,{content:a.readme,"empty-message":"No documentation available"},null,8,["content"])])):R("",!0)])]),_:1}),s(w,{span:8},{default:n(()=>[e("div",ee,[o[8]||(o[8]=e("h4",null,"Release Information",-1)),e("div",oe,[e("div",se,[o[4]||(o[4]=e("span",{class:"info-label"},"Version",-1)),s(M,{type:"primary"},{default:n(()=>[p(i(a.versionInfo.version),1)]),_:1})]),e("div",te,[o[5]||(o[5]=e("span",{class:"info-label"},"Release Date",-1)),e("span",ne,i(c.formatDate(a.versionInfo.date)),1)]),e("div",ae,[o[6]||(o[6]=e("span",{class:"info-label"},"Total Files",-1)),e("span",le,i(a.versionInfo.files?.length||0),1)]),e("div",ie,[o[7]||(o[7]=e("span",{class:"info-label"},"Total Size",-1)),e("span",re,i(c.formatSize(c.totalSize)),1)])])])]),_:1})]),_:1})]),_:1})])}const me=D(V,[["render",ce],["__scopeId","data-v-6fb601a7"]]);export{me as default};
