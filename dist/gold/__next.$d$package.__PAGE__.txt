1:"$Sreact.fragment"
2:I[95,["95","static/chunks/95-1988d38642cbadb1.js","747","static/chunks/app/%5Bpackage%5D/page-2547ddaac5a35500.js"],""]
5:I[9699,[],"OutletBoundary"]
6:"$Sreact.suspense"
3:Tf9d,# Gold - Release Management Tool

Gold is a command-line tool for uploading software release assets to cloud storage backends like S3.

## Features

- [x] Upload files to S3-compatible storage (AWS S3, MinIO, etc.)
- [x] Glob pattern support for file selection (`*.zip`, `dist/*`, `**/*.exe`)
- [x] Content type detection for various file formats
- [x] Duplicate file detection and skipping
- [x] Custom display names for files
- [x] Configuration via environment variables or command-line overrides
- [x] Comprehensive error handling and validation

## Installation

```bash
cargo install --path .
```

## Configuration

Gold requires the following environment variables:

- `ACCESS_KEY` - S3 access key ID
- `SECRET_KEY` - S3 secret access key
- `BUCKET_NAME` - S3 bucket name
- `AWS_REGION` - AWS region (default: us-east-1)
- `S3_ENDPOINT` - Custom S3 endpoint (optional, for MinIO or other S3-compatible services)

### Example .env file

```env
ACCESS_KEY=your_access_key_here
SECRET_KEY=your_secret_key_here
BUCKET_NAME=my-releases-bucket
AWS_REGION=us-west-2
S3_ENDPOINT=http://localhost:9000
```

## Usage

### Basic Usage

Upload a single file:
```bash
gold upload myapp v1.0.0 target/release/myapp.exe
```

Upload multiple files:
```bash
gold upload myapp v1.0.0 target/release/myapp.exe README.md
```

### Glob Patterns

Upload all ZIP files in a directory:
```bash
gold upload myapp v1.0.0 "dist/*.zip"
```

Upload all files recursively:
```bash
gold upload myapp v1.0.0 "dist/**/*"
```

Upload files with specific extensions:
```bash
gold upload myapp v1.0.0 "*.{exe,zip,tar.gz}"
```

### Custom Display Names

You can specify custom display names for files using the `#` separator:
```bash
gold upload myapp v1.0.0 "target/release/myapp.exe#Main Application"
```

### Configuration Overrides

Override configuration values from the command line:
```bash
gold upload myapp v1.0.0 file.zip --config BUCKET_NAME=different-bucket --config AWS_REGION=eu-west-1
```

## File Organization

Files are uploaded to S3 with the following key structure:
```
{package_name}/{tag}/{filename}
```

For example:
- Package: `myapp`
- Tag: `v1.0.0` 
- File: `myapp.exe`
- S3 Key: `myapp/v1.0.0/myapp.exe`

## Supported File Types

Gold automatically detects content types for common file formats:

- Archives: `.zip`, `.tar`, `.gz`
- Executables: `.exe`, `.msi`, `.dmg`, `.deb`, `.rpm`
- Documents: `.json`, `.txt`, `.md`
- Default: `application/octet-stream`

## Error Handling

Gold provides detailed error messages for common issues:

- Missing or invalid configuration
- Network connectivity problems
- File not found errors
- Invalid glob patterns
- S3 permission issues

## Examples

### Uploading a Release

```bash
# Set up environment
export ACCESS_KEY=your_key
export SECRET_KEY=your_secret
export BUCKET_NAME=releases
export AWS_REGION=us-east-1

# Upload release assets
gold upload myproject v2.1.0 \
  "dist/myproject-*.zip" \
  "docs/README.md#Documentation" \
  "CHANGELOG.md"
```

### Using with MinIO

```bash
# Configure for MinIO
export ACCESS_KEY=minioaccess
export SECRET_KEY=miniosecret
export BUCKET_NAME=releases
export AWS_REGION=us-east-1
export S3_ENDPOINT=http://localhost:9000

gold upload myapp v1.0.0 "*.zip"
```

### CI/CD Integration

```yaml
# GitHub Actions example
- name: Upload Release Assets
  env:
    ACCESS_KEY: ${{ secrets.S3_ACCESS_KEY }}
    SECRET_KEY: ${{ secrets.S3_SECRET_KEY }}
    BUCKET_NAME: my-releases
    AWS_REGION: us-west-2
  run: |
    gold upload ${{ github.event.repository.name }} ${{ github.ref_name }} \
      "dist/*.zip" \
      "dist/*.tar.gz" \
      "README.md#Documentation"
```

## Development

### Running Tests

```bash
cargo test
```

### Building

```bash
cargo build --release
```

## License

This project is licensed under the MIT License.
0:{"buildId":"cqmz1ndVn1NzoLUQLOFIC","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"space-y-8","children":[["$","div",null,{"className":"flex items-center gap-4 text-sm text-blue-600 dark:text-blue-400","children":["$","$L2",null,{"href":"/","className":"hover:underline","children":"‚Üê All packages"}]}],["$","header",null,{"className":"space-y-2","children":[["$","h1",null,{"className":"text-3xl font-semibold tracking-tight text-zinc-900 dark:text-zinc-50","children":"gold"}],["$","p",null,{"className":"text-sm text-zinc-600 dark:text-zinc-400","children":["Latest release ","v1.0.0",""]}]]}],["$","section",null,{"className":"space-y-3","children":[["$","h2",null,{"className":"text-lg font-medium text-zinc-900 dark:text-zinc-50","children":"Releases"}],["$","div",null,{"className":"space-y-3","children":[["$","$L2","v1.0.0",{"href":"/gold/v1.0.0","className":"group block rounded-lg border border-zinc-200 bg-white/70 p-4 transition hover:border-zinc-400 hover:bg-white dark:border-zinc-800 dark:bg-zinc-900/70 dark:hover:border-zinc-600","children":["$","div",null,{"className":"flex items-center justify-between","children":[["$","div",null,{"children":[["$","p",null,{"className":"font-medium text-zinc-900 dark:text-zinc-50","children":"v1.0.0"}],["$","p",null,{"className":"text-sm text-zinc-500 dark:text-zinc-400","children":[3," file","s",""]}]]}],["$","span",null,{"className":"text-sm text-blue-600 group-hover:underline dark:text-blue-400","children":"View release"}]]}]}]]}]]}],["$","section",null,{"className":"space-y-3","children":[["$","h2",null,{"className":"text-lg font-medium text-zinc-900 dark:text-zinc-50","children":"README"}],["$","pre",null,{"className":"max-h-[32rem] overflow-auto whitespace-pre-wrap rounded-lg border border-zinc-200 bg-zinc-50 p-4 text-sm leading-relaxed text-zinc-800 dark:border-zinc-800 dark:bg-zinc-950/70 dark:text-zinc-200","children":"$3"}]]}]]}],null,"$L4"]}],"loading":null,"isPartial":false}
4:["$","$L5",null,{"children":["$","$6",null,{"name":"Next.MetadataOutlet","children":"$@7"}]}]
7:null
